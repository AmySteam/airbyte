"use strict";(self.webpackChunkdocu=self.webpackChunkdocu||[]).push([[5815],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=d(n),f=r,h=m["".concat(s,".").concat(f)]||m[f]||p[f]||i;return n?a.createElement(h,o(o({ref:t},c),{},{components:n})):a.createElement(h,o({ref:t},c))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var d=2;d<i;d++)o[d]=n[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},3213:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>d});var a=n(87462),r=(n(67294),n(3905));const i={},o="Understanding the YAML file",l={unversionedId:"connector-development/config-based/understanding-the-yaml-file/yaml-overview",id:"connector-development/config-based/understanding-the-yaml-file/yaml-overview",title:"Understanding the YAML file",description:"The low-code framework involves editing a boilerplate YAML file. This section deep dives into the components of the YAML file.",source:"@site/../docs/connector-development/config-based/understanding-the-yaml-file/yaml-overview.md",sourceDirName:"connector-development/config-based/understanding-the-yaml-file",slug:"/connector-development/config-based/understanding-the-yaml-file/yaml-overview",permalink:"/connector-development/config-based/understanding-the-yaml-file/yaml-overview",draft:!1,editUrl:"https://github.com/airbytehq/airbyte/blob/master/docs/../docs/connector-development/config-based/understanding-the-yaml-file/yaml-overview.md",tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"Step 6: Testing",permalink:"/connector-development/config-based/tutorial/testing"},next:{title:"Requester",permalink:"/connector-development/config-based/understanding-the-yaml-file/requester"}},s={},d=[{value:"Stream",id:"stream",level:2},{value:"Data retriever",id:"data-retriever",level:3},{value:"Transformations",id:"transformations",level:3},{value:"Adding fields",id:"adding-fields",level:4},{value:"Removing fields",id:"removing-fields",level:4}],c={toc:d};function p(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"understanding-the-yaml-file"},"Understanding the YAML file"),(0,r.kt)("p",null,"The low-code framework involves editing a boilerplate ",(0,r.kt)("a",{parentName:"p",href:"/connector-development/config-based/low-code-cdk-overview#configuring-the-yaml-file"},"YAML file"),". This section deep dives into the components of the YAML file."),(0,r.kt)("h2",{id:"stream"},"Stream"),(0,r.kt)("p",null,"Streams define the schema of the data to sync, as well as how to read it from the underlying API source. A stream generally corresponds to a resource within the API. They are analogous to tables for a relational database source."),(0,r.kt)("p",null,"A stream is defined by:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"A name"),(0,r.kt)("li",{parentName:"ol"},"Primary key (Optional): Used to uniquely identify records, enabling deduplication. Can be a string for single primary keys, a list of strings for composite primary keys, or a list of list of strings for composite primary keys consisting of nested fields"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"/connector-development/cdk-python/schemas"},"Schema"),": Describes the data to sync"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"#data-retriever"},"Data retriever"),": Describes how to retrieve the data from the API"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"/connector-development/cdk-python/incremental-stream"},"Cursor field")," (Optional): Field to use as stream cursor. Can either be a string, or a list of strings if the cursor is a nested field."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"#transformations"},"Transformations")," (Optional): A set of transformations to be applied on the records read from the source before emitting them to the destination"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"https://docs.airbyte.com/understanding-airbyte/airbyte-protocol/#state--checkpointing"},"Checkpoint interval")," (Optional): Defines the interval, in number of records, at which incremental syncs should be checkpointed")),(0,r.kt)("h3",{id:"data-retriever"},"Data retriever"),(0,r.kt)("p",null,"The data retriever defines how to read the data for a Stream, and acts as an orchestrator for the data retrieval flow.\nThere is currently only one implementation, the ",(0,r.kt)("inlineCode",{parentName:"p"},"SimpleRetriever"),", which is defined by"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"/connector-development/config-based/understanding-the-yaml-file/requester"},"Requester"),": Describes how to submit requests to the API source"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"/connector-development/config-based/understanding-the-yaml-file/pagination"},"Paginator"),": Describes how to navigate through the API's pages"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"/connector-development/config-based/understanding-the-yaml-file/record-selector"},"Record selector"),": Describes how to extract records from a HTTP response"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"/connector-development/config-based/understanding-the-yaml-file/stream-slicers"},"Stream Slicer"),": Describes how to partition the stream, enabling incremental syncs and checkpointing")),(0,r.kt)("p",null,"Each of those components (and their subcomponents) are defined by an explicit interface and one or many implementations.\nThe developer can choose and configure the implementation they need depending on specifications of the integration they are building against."),(0,r.kt)("p",null,"Since the ",(0,r.kt)("inlineCode",{parentName:"p"},"Retriever")," is defined as part of the Stream configuration, different Streams for a given Source can use different ",(0,r.kt)("inlineCode",{parentName:"p"},"Retriever")," definitions if needed."),(0,r.kt)("h3",{id:"transformations"},"Transformations"),(0,r.kt)("p",null,"Fields can be added or removed from records by adding ",(0,r.kt)("inlineCode",{parentName:"p"},"Transformation"),"s to a stream's definition."),(0,r.kt)("h4",{id:"adding-fields"},"Adding fields"),(0,r.kt)("p",null,"Fields can be added with the ",(0,r.kt)("inlineCode",{parentName:"p"},"AddFields"),' transformation.\nThis example adds a top-level field "field1" with a value "static_value"'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'stream:\n  <...>\n  transformations:\n      - type: AddFields\n        fields:\n          - path: [ "field1" ]\n            value: "static_value"\n')),(0,r.kt)("p",null,'This example adds a top-level field "start_date", whose value is evaluated from the stream slice:'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"stream:\n  <...>\n  transformations:\n      - type: AddFields\n        fields:\n          - path: [ \"start_date\" ]\n            value: {{ stream_slice[ 'start_date' ] }}\n")),(0,r.kt)("p",null,"Fields can also be added in a nested object by writing the fields' path as a list."),(0,r.kt)("p",null,"Given a record of the following shape:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n  "id": 0,\n  "data":\n  {\n    "field0": "some_data"\n  }\n}\n')),(0,r.kt)("p",null,'this definition will add a field in the "data" nested object:'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'stream:\n  <...>\n  transformations:\n      - type: AddFields\n        fields:\n          - path: [ "data", "field1" ]\n            value: "static_value"\n')),(0,r.kt)("p",null,"resulting in the following record:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n  "id": 0,\n  "data":\n  {\n    "field0": "some_data",\n    "field1": "static_value"\n  }\n}\n')),(0,r.kt)("h4",{id:"removing-fields"},"Removing fields"),(0,r.kt)("p",null,"Fields can be removed from records with the ",(0,r.kt)("inlineCode",{parentName:"p"},"RemoveFields")," transformation."),(0,r.kt)("p",null,"Given a record of the following shape:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n  "path": \n  {\n    "to":\n    {\n      "field1": "data_to_remove",\n      "field2": "data_to_keep"\n    }\n  },\n  "path2": "data_to_remove",\n  "path3": "data_to_keep"\n}\n')),(0,r.kt)("p",null,'this definition will remove the 2 instances of "data_to_remove" which are found in "path2" and "path.to.field1":'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'the_stream:\n  <...>\n  transformations:\n      - type: RemoveFields\n        field_pointers:\n          - [ "path", "to", "field1" ]\n          - [ "path2" ]\n')),(0,r.kt)("p",null,"resulting in the following record:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n  "path": \n  {\n    "to":\n    {\n      "field2": "data_to_keep"\n    }\n  },\n  "path3": "data_to_keep"\n}\n')))}p.isMDXComponent=!0}}]);